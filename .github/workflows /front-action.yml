name: Check the source code

# push 또는 pull_request 이벤트가 발생할 때 실행됩니다.
on:
  push:
  pull_request:

jobs:
  test:
    name: Check the source code
    runs-on: ubuntu-latest # 최신 Ubuntu 환경에서 실행

    steps:
      # 1. 레포지토리 코드 체크아웃
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Node.js 환경 설정 (추가 및 수정)
      #    - 특정 Node.js 버전을 지정합니다. (프로젝트에 맞게 '20'을 수정하세요)
      #    - cache: 'npm'을 추가하여 npm ci 속도를 향상시킵니다.
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      # 3. 의존성 패키지 설치 (npm ci 사용 권장)
      #    (ci는 package-lock.json을 기반으로 정확한 버전을 설치합니다.)
      - name: Install packages
        run: npm ci

      # 4. Prettier 포맷팅 '체크' (수정)
      #    - CI에서는 'npm run format'(수정) 대신 'npm run format:check'(검사)를 실행해야 합니다.
      #    - 만약 이 스크립트가 없다면 package.json에 추가하세요. (예: "format:check": "prettier --check .")
      - name: Check formatting (Prettier)
        run: npm run format:check

      # 5. ESLint 실행
      - name: Lint
        run: npm run lint
